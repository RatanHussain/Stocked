<!-- @format -->

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="style.css" />
		<script
			src="https://kit.fontawesome.com/f0be14b3ea.js"
			crossorigin="anonymous"></script>
		<title>Stock-Movement</title>
	</head>
	<body>
		<div class="container" id="container">
			<h2>RATAN INVENTORY</h2>
			<form
				action="https://sheetdb.io/api/v1/36qek0pf93bxm"
				method="post"
				id="sheetdb-form">
				<div class="headLine">
					<div class="all quantity">
						<label for="BIN">BIN</label>
						<input
							class="bin"
							type="text"
							name="data[BIN]"
							id="display"
							placeholder="Enter Bin here"
							required />
					</div>
					<div>
						<!-- <input type="submit" value="Sales" /> -->
						<input class="btn" type="submit" value="Submit" />
					</div>
				</div>
				<div class="all quantity">
					<label for="LPN">LPN</label>
					<textarea
						class="lpn"
						type="text"
						name="data[LPN]"
						id="display"
						placeholder="Enter LPN's here"
						required
						rows="30"></textarea>
				</div>
			</form>
			<p>Design by Ratan</p>
		</div>

		<script>
			var form = document.getElementById('sheetdb-form');
			var currentDate = document.querySelector('#currentDate');
			let calcuId = document.querySelector('#calcuId');
			let closeBtn = document.querySelector('#closeBtn');
			let calculator = document.querySelector('#calculator');
			let container = document.querySelector('#container');
			let display = document.querySelector('#display');
			let quantity = document.querySelector('#quantity');

			form.addEventListener('submit', (e) => {
				e.preventDefault();

				const binValue = document.querySelector('.bin').value;
				const lpnValue = document.querySelector('.lpn').value;

				// Split textarea lines by new line
				const lpnLines = lpnValue
					.split('\n')
					.filter((line) => line.trim() !== '');

				const requests = lpnLines.map((line) => {
					const formData = new FormData();
					formData.append('data[BIN]', binValue);
					formData.append('data[LPN]', line.trim());
					return fetch(form.action, {
						method: 'POST',
						body: formData,
					});
				});

				Promise.all(requests)
					.then(() => {
						alert('Submitted all entries!');
						form.reset();
					})
					.catch((error) => {
						alert('Error submitting entries: ' + error.message);
					});
			});
		</script>
	</body>
</html>
